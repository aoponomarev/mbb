# Vue-библиотеки для проекта

> Оглавление `docs/doc-vue-lib.md`
- § Принцип приоритета библиотек — правило использования библиотек перед кастомными модулями
- § Рекомендуемые библиотеки — список библиотек с описанием и приоритетами
- § Схема хранения библиотек — структура libs-репозитория и источники загрузки
- § Механизм загрузки — fallback-система и порядок источников

> § <br> ПРИНЦИП ПРИОРИТЕТА БИБЛИОТЕК

## Правило использования библиотек
Перед написанием кастомного модуля **обязательно** проверь наличие подходящих Vue-библиотек с расширяемым API. Приоритет библиотекам, которые:
- Имеют расширяемый API (плагины, composables, кастомизация)
- Работают через CDN без сборки
- Поддерживают кастомизацию под специфику проекта
- Активно поддерживаются сообществом

**Исключения**: Кастомные модули создаются только если:
- Библиотека не существует или не подходит по функциональности
- Библиотека слишком тяжёлая для конкретной задачи
- Требуется специфичная бизнес-логика, недоступная в библиотеках

> § <br> РЕКОМЕНДУЕМЫЕ БИБЛИОТЕКИ

## Критически важные

### Chart.js
- **Назначение**: Графики для временных рядов, метрик, корреляций
- **Версия**: 4.4.0+
- **Расширяемость**: Плагины, кастомные типы графиков, форматеры
- **Источник**: `https://aoponomarev.github.io/libs/chartjs/4.4.0/chart.umd.js`
- **Fallback**: `https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js`
- **Примечание**: vue-chartjs не имеет официальной UMD сборки, требуется интеграция Chart.js напрямую с Vue компонентами

### Numeral.js
- **Назначение**: Форматирование финансовых данных (валюты, проценты, большие числа)
- **Версия**: 2.0.6+
- **Расширяемость**: Кастомные форматы чисел
- **Источник**: `https://aoponomarev.github.io/libs/numeral/2.0.6/numeral.min.js`
- **Fallback**: `https://cdn.jsdelivr.net/npm/numeral@2.0.6/min/numeral.min.js`

## Очень полезные

### VueUse
- **Назначение**: Композиции для работы с данными, временем, хранилищем
- **Версия**: 10.7.0+
- **Расширяемость**: Создание собственных composables на основе существующих
- **Примечание**: Не имеет официальной UMD сборки, требуется сборка из исходников или использование отдельных composables
- **Полезные composables**: `useLocalStorage`, `useFetch`, `useDebounce`, `useThrottle`

### Vue Draggable
- **Назначение**: Drag & drop для конструктора портфелей, сортировки таблиц
- **Версия**: 4.1.0+
- **Расширяемость**: События, опции, слоты для кастомизации
- **Источник**: `https://aoponomarev.github.io/libs/vuedraggable/4.1.0/vuedraggable.umd.js`
- **Fallback**: `https://cdn.jsdelivr.net/npm/vuedraggable@4.1.0/dist/vuedraggable.umd.js`

## Полезные для финансовых данных

### Day.js (альтернатива date-fns)
- **Назначение**: Работа с датами для временных рядов (альтернатива date-fns, который не имеет UMD сборки)
- **Версия**: 1.11.10+
- **Расширяемость**: Плагины для расширения функциональности
- **Источник**: `https://aoponomarev.github.io/libs/dayjs/1.11.10/dayjs.min.js`
- **Fallback**: `https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js`

## Для таблиц (если нужны продвинутые функции)

### AG Grid Community
- **Назначение**: Продвинутые таблицы с сортировкой, фильтрацией, группировкой
- **Версия**: Latest
- **Расширяемость**: Кастомные компоненты, renderers, filters
- **Примечание**: Тяжёлая библиотека, использовать только при необходимости

### Vue Good Table
- **Назначение**: Легковесная альтернатива AG Grid для финансовых таблиц
- **Версия**: Latest
- **Расширяемость**: Слоты и опции для кастомизации

> § <br> СХЕМА ХРАНЕНИЯ БИБЛИОТЕК

## Структура libs-репозитория
Библиотеки хранятся в отдельном репозитории `https://github.com/aoponomarev/libs` со структурой:

```
libs/
├── vue/
│   └── 3.4.0/
│       └── vue.global.js
├── chartjs/
│   └── 4.4.0/
│       ├── chart.umd.js
│       └── chart.min.js
├── numeral/
│   └── 2.0.6/
│       └── numeral.min.js
├── vuedraggable/
│   └── 4.1.0/
│       └── vuedraggable.umd.js
├── dayjs/
│   └── 1.11.10/
│       └── dayjs.min.js
└── README.md
```

**Примечание**: vue-chartjs и vueuse не имеют официальных UMD сборок и требуют сборки из исходников или альтернативных решений.

## Источники загрузки (в порядке приоритета)
1. **GitHub Pages CDN** (`https://aoponomarev.github.io/libs/`) — основной источник
2. **Внешние CDN** (jsdelivr, cdnjs) — fallback при недоступности основного
3. **Локальное хранение** (`./libs/`) — критичные библиотеки для офлайн-режима

## Преимущества схемы
- Единый репозиторий для всех проектов
- Контроль версий через Git
- GitHub Pages как CDN
- Возможность использования разных версий
- Простое обновление библиотек

> § <br> МЕХАНИЗМ ЗАГРУЗКИ

## Fallback-система
Загрузка библиотек через `core/lib-loader.js` с автоматическим fallback:
1. Попытка загрузки из GitHub Pages CDN
2. При ошибке — fallback на внешние CDN (jsdelivr, cdnjs)
3. При ошибке — fallback на локальное хранение (если доступно)

## Использование
```javascript
// Загрузка библиотеки через lib-loader
await window.libLoader.load('vue', '3.4.0');
await window.libLoader.load('chartjs', '4.4.0');
```

## Манифест библиотек
Файл `manifest.json` в libs-репозитории содержит информацию о всех доступных библиотеках и их версиях для автоматической загрузки.


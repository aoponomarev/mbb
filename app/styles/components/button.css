/**
 * Стили для компонента BUTTON
 *
 * НАЗНАЧЕНИЕ: Предоставить адаптивность компонента cmp-button через CSS классы
 * и вложенные селекторы для управления видимостью элементов (иконка, текст, укороченный текст, суффикс).
 *
 * ПРИНЦИП РАБОТЫ:
 * - Mobile-first подход: базовые стили для мобильных, переопределение через @media для desktop (>= 576px)
 * - Использование класса .btn-responsive на корневом элементе кнопки
 * - Классы-модификаторы: .has-icon, .has-label-short, .icon-only, .hide-suffix
 * - Управление видимостью через visibility, font-size, max-width вместо display: none
 *   (это позволяет элементам оставаться в DOM для корректной работы flexbox gaps)
 *
 * БРЕЙКПОИНТ: 576px (SM Bootstrap) - стандартный брейкпоинт Bootstrap для перехода mobile → desktop
 *
 * ЗАВИСИМОСТИ:
 * - Bootstrap 5 (классы .btn, .btn-sm, .btn-lg, .d-flex, .align-items-center)
 * - Используется в: cmp-button, cmp-dropdown (кнопка триггера), cmp-button-group
 *
 * ПОРЯДОК ЗАГРУЗКИ:
 * Загружается первым среди компонентных стилей, так как является базовым компонентом,
 * используемым другими компонентами (dropdown, button-group).
 *
 * Подробнее: docs/doc-components.md (раздел "Компонент button")
 */

/* ============================================================================
   КОМПОНЕНТ BUTTON
   ============================================================================ */

/* Базовые стили (mobile-first) */
.btn-responsive .icon {
  /* Квадратная обертка иконки по высоте строки */
  /* Используется height: 1em и width: 1em вместо aspect-ratio для предотвращения растягивания кнопки */
  height: 1em; /* Высота строки текста */
  width: 1em; /* Квадрат по высоте строки */
  flex-shrink: 0; /* Предотвращает сжатие иконки */
}

/* ============================================================================
   ВЫРАВНИВАНИЕ ВЫСОТЫ С BOOTSTRAP ЭЛЕМЕНТАМИ
   ============================================================================

   Убираем вертикальный padding с самого <button> элемента для btn-responsive.
   Bootstrap добавляет padding на .btn, но для btn-responsive весь padding
   должен быть только на внутреннем контейнере .d-flex (строки 176-189).

   Это обеспечивает, что высота btn-responsive совпадает с высотой стандартных
   Bootstrap элементов (form-control, btn-check + label) того же размера.
   ============================================================================ */

.btn-responsive.btn {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/* Горизонтальный padding остается от Bootstrap (padding-left, padding-right) */

/* ============================================================================
   ОТСТУПЫ МЕЖДУ ЭЛЕМЕНТАМИ (gaps)
   ============================================================================

   ВАЖНО: НЕ используется flexbox gap, так как он применяется между ВСЕМИ
   дочерними элементами, даже скрытыми через visibility:hidden или width:0.
   Это вызывает смещение иконки в кнопках, где текст скрыт на мобильных.

   РЕШЕНИЕ: Отступы управляются через margin-right/margin-left для конкретных
   элементов через селекторы :not(:last-child) и :not(:first-child).

   Подробнее: docs/doc-components.md (раздел "Работа с отступами в составных компонентах")
   ============================================================================ */

/* Отступ слева для суффикса, чтобы отделить его от предыдущего элемента (текста или иконки) */
.btn-responsive .suffix-container:not(:first-child) {
  margin-left: 0.5rem; /* 8px - эквивалент gap-2 */
}

/* Отступ справа от укороченного текста (только если есть соседний элемент справа) */
.btn-responsive .label-short:not(:last-child) {
  margin-right: 0.5rem; /* 8px - эквивалент gap-2 */
}

/* Базовое скрытие текста на мобильных */
.btn-responsive .label,
.btn-responsive .label-short {
  visibility: hidden;
  font-size: 0;
  line-height: 0;
  max-width: 0;
  overflow: hidden;
  display: inline;
}

/* Если есть иконка - скрыть текст на мобильных (текст показывается на десктопе через @media) */
.btn-responsive.has-icon .label,
.btn-responsive.has-icon .label-short {
  visibility: hidden;
  font-size: 0;
  line-height: 0;
  max-width: 0;
  overflow: hidden;
  display: inline;
}

/* Если нет иконки, но есть короткий текст - показать его на мобильных */
.btn-responsive.has-label-short:not(.has-icon) .label-short {
  visibility: visible;
  font-size: inherit;
  line-height: inherit;
  max-width: none;
  overflow: visible;
  display: inline;
  /* Убираем margin-right, так как .label (скрытый) все еще в DOM и делает .label-short не :last-child */
  margin-right: 0 !important;
}

.btn-responsive.has-label-short:not(.has-icon) .label {
  visibility: hidden;
  font-size: 0;
  line-height: 0;
  max-width: 0;
  overflow: hidden;
  display: inline;
}

/* Десктоп 576px */
@media (min-width: 576px) {
  .btn-responsive .icon {
    display: none;
  }

  /* ========================================================================
     ОТСТУПЫ МЕЖДУ ЭЛЕМЕНТАМИ НА DESKTOP (gaps)
     ======================================================================== */

  /* Отступ справа от иконки (только если есть соседний элемент справа) */
  .btn-responsive .icon:not(:last-child) {
    margin-right: 0.5rem; /* 8px - эквивалент gap-2 */
  }

  /* Переопределение для кнопок только с иконкой (без текста и суффикса) */
  .btn-responsive.icon-only .icon {
    margin-right: 0 !important;
  }

  /* Отступ справа от текста (только если есть соседний элемент справа) */
  .btn-responsive .label:not(:last-child),
  .btn-responsive .label-short:not(:last-child) {
    margin-right: 0.5rem; /* 8px - эквивалент gap-2 */
  }

  /* Показываем текст на desktop */
  .btn-responsive .label,
  .btn-responsive.has-icon .label {
    visibility: visible;
    font-size: inherit;
    line-height: inherit;
    max-width: none;
    overflow: visible;
    display: inline;
  }

  /* На desktop показываем иконку, если она есть */
  .btn-responsive.has-icon .icon {
    display: flex; /* Возвращаем flex вместо none для кнопок с иконкой */
  }

  .btn-responsive.has-label-short:not(.has-icon) .label-short {
    visibility: hidden;
    font-size: 0;
    line-height: 0;
    max-width: 0;
    overflow: hidden;
    display: inline;
  }

  .btn-responsive.has-label-short:not(.has-icon) .label {
    visibility: visible;
    font-size: inherit;
    line-height: inherit;
    max-width: none;
    overflow: visible;
    display: inline;
  }
}

/* Скрыть стандартный Bootstrap chevron для кнопок с классом dropdown-toggle внутри btn-responsive */
.btn-responsive.dropdown-toggle::after {
  display: none !important;
}

/* Вертикальный padding для внутреннего контейнера кнопки в зависимости от размера */
/* Привязка к классам размеров Bootstrap: btn-sm, btn-lg */
/* БЕЗ !important - используем специфичность селекторов */
.btn-responsive.btn-sm > .d-flex {
  padding-top: 0.25rem; /* Соответствует btn-sm padding-y */
  padding-bottom: 0.25rem;
}

.btn-responsive:not(.btn-sm):not(.btn-lg) > .d-flex {
  padding-top: 0.375rem; /* Соответствует btn default padding-y */
  padding-bottom: 0.375rem;
}

.btn-responsive.btn-lg > .d-flex {
  padding-top: 0.5rem; /* Соответствует btn-lg padding-y */
  padding-bottom: 0.5rem;
}

/* Переопределение для случая с p-0 - убираем padding для всех размеров */
.btn-responsive > .d-flex.p-0 {
  padding-top: 0;
  padding-bottom: 0;
}

/* Скрытие суффиксов (chevron) в кнопке при использовании класса hide-suffix */
.btn-responsive.hide-suffix .suffix-container {
  display: none !important;
}

/* Переопределение отступов для особых случаев */
/* Кнопки только с иконкой (без текста и суффикса) - убираем margin-right */
.btn-responsive.icon-only .icon {
  margin-right: 0 !important;
}


# Правила для ИИ-агента Cursor

> Оглавление
>>Правила работы ИИ-агента `.cursorrules`
- § Требования — базовые правила к ИИ‑агенту и общему стилю работы в репозитории.
- § Ограничения доступа к папкам*** — правила работы с защищенными папками.
- § Общие правила проекта — настройки и конфигурация проекта.
- § Понятия — определения используемых терминов.
- § Протоколы — сценарии действий по командам пользователя.
  - Протокол по команде "комить", "закомить всё" и т.п.
>>Документация проекта
- `docs/.cursorrules` — правила работы с документацией проекта.

## ТРЕБОВАНИЯ к ии-агенту
1. Работа с документацией:
   - При редактировании используй сухой, сжатый, технократический стиль, стандартную терминологию разработки; формулируй точно и технически корректно; **заменяй жаргон, сленг, фразелогизмы, архаизмы, разговорные выражения, метафоры** (в т.ч. от пользователя);
   - Соблюдай заданный стиль разметки и нумерацию разделов; **проверяй и исправляй нумерацию** после изменений структуры документа;
   - Перед выполнением запроса выборочно перечитывай релевантные фрагменты документации в `docs/`, используя поиск и заголовки. Для простых задач — минимальный набор файлов, для сложных — расширяй круг документов;
2. Строго следуй Правилам и документации: принципам, ограничениям, рекомендациям, паттернам и подходам. При конфликте между запросом пользователя и правилами проекта сделай остановку, предупреди пользователя о конфликте с правилами. Исполнение таких запросов возможно только после исправления правил документации.
3. При проектировании и поиске решений опирайся на существующие паттерны, компоненты и подходы, уже описанные в документации, а не изобретай новые без необходимости.
4. Распознавай команды пользователя и действуй по предписанным протоколам.

## Ограничения
- `do-overs/` - запрещена запись и добавление файлов в staging, подробности: `do-overs/.cursorrules`.
- Коммиты только по явной команде пользователя.

## Общие правила проекта
- Все настройки проекта находятся в папке `.vscode/`
- Синхронизация настроек происходит через файл `.cursorrules`
- Пользовательский словарь для проверки орфографии: `.vscode/cspell-dict.txt`
- Правила работы с документацией: `docs/.cursorrules`

## Понятия
- *Тематические логи* — файлы в папке `docs/logs/` с описанием коммитов, разбитым по темам, соответствующим вкладкам чатов агента: `Cursor.md`, `ARCH.md`, `HTML-CSS.md`, `DOCS.md`, `MM.md`. Заполняется по мере появления коммитов; при создании коммита запись добавляется БЕЗ хеша, хеши добавляются только при завершении рабочего дня.
- *Лог чата* — вся текущая дневная история переписки пользователя с ИИ-агентом.
- *Протокол* — сценарий действий по конкретной команде пользователя или в ответ на конкретную ситуацию. Протоколы описывают последовательность шагов для выполнения определенной задачи по запросу: протокол коммитов (по команде "комить"), протокол открытия дня (по команде "новый рабочий день"), протокол массовых правок (при обнаружении необходимости). Протоколы активируются по команде или при опознании необходимости.
- *Тегирование* — добавление ситуативных интуитивных тегов к записям в тематических логах для облегчения поиска. Теги размещаются отдельной строкой после `◉` в формате `@tag1 @tag2`. Теги должны отражать суть изменений и быть удобными для поиска: включать как общие категории (тип изменения, область), так и узкоспецифичные теги для точечного поиска (конкретные компоненты, функции, паттерны).

## Протокол по командам "комить", "закомить всё" и т.п.
1. Выполни `git status`, убедись, что все необходимые изменения в staging.
2. Определи затронутые темы: Cursor (настройки проекта) или MBB (ARCH, HTML-CSS, DOCS, MM - разработка приложения) по контексту и содержимому изменений.
3. Разделение коммита: Если изменения затрагивают и настройки (Cursor), и разработку (MBB) — раздели на два коммита:
   - Первый коммит: только файлы разработки (код приложения, документация проекта и т.п.) → тема MBB
   - Второй коммит: только файлы настроек (`.vscode/`, `.cursorrules`, `.gitignore` и т.п.) → тема Cursor (настроечные коммиты бывают редко)
   - Каждый коммит фиксируется в соответствующем тематическом логе.
4. Сформируй краткое и технически точное название для каждого коммита.
5. Определи вкладку чата по контексту обсуждения: Cursor (настройки проекта) или MBB (разработка приложения). Если тема изменений не соответствует текущей вкладке — автоматически фиксируй изменения в правильном тематическом логе без уведомления пользователя.
6. В каждой затронутой теме добавь запись в `docs/logs/*.md`: `Cursor.md`, `ARCH.md`, `HTML-CSS.md`, `DOCS.md`, `MM.md`:
   - используй обратный хронологический порядок (всегда добавляй запись в начало лога);
   - формат записи:
     заголовок `## Коммит от DD.MM.YYYY : <имя>` (без хеша, хеш добавляется только при завершении рабочего дня),
     строки `◆ ...` (что сделано), `▶ ...` (как сделано), `◉ ...` (для чего), `Тегирование` (@tag1 @tag2...)
     Для малозначимых/технических/корректурных изменений описание максимально краткое.
   - Один и тот же коммит может появляться в нескольких тематических логах, но каждая запись описывает только изменения своей специализации.
   - Описание должно базироваться на истории `лог чата`, полностью согласованным с кодовой базой.
   - Не создавай коммит, пока все изменения не отражены в тематических логах.
7. Выполни `git add` для всех файлов коммита (включая `docs/logs/*.md`), затем `git commit -m "имя коммита"`, проверь `git status`.



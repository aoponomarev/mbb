<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBB - Statistics</title>

    <!--
    ================================================================================================
    ПРИНЦИПЫ МОДУЛЬНОСТИ И ОРГАНИЗАЦИИ ПРОЕКТА
    ================================================================================================

    ЦЕЛЬ: index.html служит только точкой подключения всех скриптов и стилей.
    Вся разметка компонентов, шаблоны и логика вынесены в отдельные модули.

    ------------------------------------------------------------------------------------------------
    1. ВЫНОС X-TEMPLATE ШАБЛОНОВ В ОТДЕЛЬНЫЕ ФАЙЛЫ
    ------------------------------------------------------------------------------------------------

    Проблема: В старом проекте все x-template шаблоны (17+ штук) находились внутри index.html,
    что раздувало файл до 1300+ строк.

    Решение:
    - Каждый x-template шаблон выносится в отдельный файл в папке shared/templates/ (переиспользуемые) или features/<feature-name>/templates/ (feature-specific)
    - Формат имени: <component-name>-template.html
    - Пример: shared/templates/button-template.html, features/layout/templates/splash-template.html

    Загрузка шаблонов:
    - Шаблоны загружаются динамически через fetch() ДО инициализации Vue.js
    - Загрузчик шаблонов находится в core/template-loader.js
    - Шаблоны вставляются в DOM как <script type="text/x-template"> элементы
    - Порядок загрузки критичен: шаблоны → Vue.js → компоненты → app

    Преимущества:
    - index.html остаётся компактным (только подключения)
    - Шаблоны легко находить и редактировать
    - Возможность переиспользования шаблонов
    - Улучшенная читаемость и поддержка

    ------------------------------------------------------------------------------------------------
    2. МОДУЛЬНАЯ СИСТЕМА ЗАГРУЗКИ СКРИПТОВ
    ------------------------------------------------------------------------------------------------

    Проблема: В старом проекте 30+ <script> тегов в index.html, сложно управлять порядком загрузки.

    Решение:
    - Создать конфигурационный файл core/modules-config.js с описанием всех модулей
    - Модули группируются по категориям: библиотеки, утилиты, core, domain, features, shared, app
    - Загрузчик модулей core/module-loader.js читает конфигурацию и загружает модули в правильном порядке
    - В index.html остаётся только подключение загрузчика модулей

    Структура modules-config.js:
    {
        libraries: [
            { src: 'https://cdn.../bootstrap.js', type: 'external' },
            { src: 'https://unpkg.com/vue@3...', type: 'external' }
        ],
        core: [
            { src: 'core/cfg-app.js', type: 'local', deps: [] },
            { src: 'core/api/coingecko.js', type: 'local', deps: ['core/cfg-app.js'] }
        ],
        shared: [
            { src: 'shared/components/button.js', type: 'local', deps: ['core/cfg-app.js'] }
        ],
        app: [
            { src: 'app/app-ui-root.js', type: 'local', deps: ['shared/**', 'features/**'] }
        ]
    }

    Преимущества:
    - Централизованное управление зависимостями
    - Автоматическая проверка порядка загрузки
    - Легко добавлять/удалять модули
    - Возможность условной загрузки модулей

    ------------------------------------------------------------------------------------------------
    3. ГРУППИРОВКА КОМПОНЕНТОВ И МОДУЛЕЙ
    ------------------------------------------------------------------------------------------------

    Принципы организации:

    a) По функциональности (features/):
       - features/markets/ - все компоненты и логика работы с рынками
       - features/portfolios/ - конструктор портфелей
       - features/metrics/ - расчёт и отображение метрик
       Каждая feature содержит: компоненты, утилиты, шаблоны, стили

    b) По слоям архитектуры:
       - core/ - базовые утилиты, конфигурация, API-обёртки
       - domain/ - бизнес-логика, сущности, сервисы
       - shared/ - переиспользуемые компоненты, стили, утилиты
       - app/ - корневой компонент приложения

    c) По типу файлов:
       - shared/templates/ - переиспользуемые x-template шаблоны
       - shared/components/ - переиспользуемые Vue компоненты
       - shared/styles/ - общие CSS файлы
       - shared/utils/ - общие утилиты
       - shared/config/ - общая конфигурация
       - core/api/ - утилиты для работы с внешними API (чистые функции)
       - features/<feature-name>/components/ - feature-specific компоненты
       - features/<feature-name>/styles/ - feature-specific стили

    ------------------------------------------------------------------------------------------------
    4. ПРАВИЛА РАЗМЕЩЕНИЯ ФАЙЛОВ
    ------------------------------------------------------------------------------------------------

    Шаблоны (x-template):
    - shared/templates/<component-name>-template.html (переиспользуемые)
    - features/<feature-name>/templates/<component-name>-template.html (feature-specific)
    - Загружаются через core/template-loader.js

    Компоненты Vue:
    - shared/components/<component-name>.js (переиспользуемые)
    - features/<feature-name>/components/<component-name>.js (feature-specific)
    - Экспортируют Vue компонент через window или Vue.component()

    Стили:
    - shared/styles/<component-name>.css (общие)
    - features/<feature-name>/styles/<component-name>.css (feature-specific)

    Утилиты:
    - core/api/<api-name>.js - чистые функции для API (не Vue)
    - shared/utils/<utility-name>.js - общие утилиты
    - features/<feature-name>/utils/<utility-name>.js - feature-specific утилиты

    Конфигурация:
    - shared/config/<config-name>.js - общая конфигурация
    - features/<feature-name>/config/<config-name>.js - feature-specific конфигурация

    Математические модели:
    - mm/<model-name>/utils/ - утилиты модели
    - mm/<model-name>/core/ - ядро модели
    - mm/<model-name>/metrics/ - метрики модели

    ------------------------------------------------------------------------------------------------
    5. ПОРЯДОК ЗАГРУЗКИ (КРИТИЧЕСКИ ВАЖНО)
    ------------------------------------------------------------------------------------------------

    1. Bootstrap CSS и внешние стили
    2. Локальные стили (theme, layout, components)
    3. Bootstrap JS
    4. Загрузчик шаблонов (core/template-loader.js) - загружает все x-template
    5. Конфигурация модулей (core/modules-config.js)
    6. Загрузчик модулей (core/module-loader.js) - загружает все скрипты по конфигурации
    7. Инициализация приложения (app/app-ui-root.js)

    Нарушение порядка приводит к ошибкам:
    - Vue не найдёт шаблоны, если они не загружены до Vue.js
    - Компоненты не загрузятся, если их зависимости не загружены
    - Стили не применятся, если загружены после разметки

    ------------------------------------------------------------------------------------------------
    6. ПРИНЦИПЫ ИМЕНОВАНИЯ
    ------------------------------------------------------------------------------------------------

    Файлы компонентов: kebab-case
    - shared/components/button.js
    - shared/components/system-messages.js

    Файлы шаблонов: kebab-case с суффиксом -template
    - shared/templates/button-template.html
    - features/layout/templates/splash-template.html

    Файлы утилит: kebab-case
    - core/api/coingecko.js
    - shared/utils/table-sort-mixin.js

    ID шаблонов в DOM: kebab-case (соответствует имени файла без расширения)
    - <script type="text/x-template" id="splash-template">
    - <script type="text/x-template" id="header-template">

    ------------------------------------------------------------------------------------------------
    7. РАБОТА БЕЗ СБОРКИ
    ------------------------------------------------------------------------------------------------

    Проект должен работать:
    - На GitHub Pages (HTTPS)
    - Локально через file:// протокол
    - Без использования bundler'ов (webpack, vite и т.п.)

    Ограничения:
    - Нет ES6 модулей (import/export)
    - Использование глобальных переменных через window.*
    - Динамическая загрузка через fetch() и eval() или создание <script> тегов
    - Относительные пути к файлам

    Преимущества:
    - Простота развёртывания
    - Нет необходимости в сборке
    - Быстрая разработка без компиляции

    ================================================================================================
    -->

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <!-- Кастомные брейкпоинты для адаптивности компонентов -->
    <link rel="stylesheet" href="app/styles/responsive-breakpoints.css">

    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Material Symbols (Sharp) -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@20..48,400,0,0" />

    <!-- Локальные стили -->
    <!-- TODO: Добавить подключение стилей через модульную систему -->

</head>
<body class="min-vh-100 pt-5 pb-5 d-flex flex-column">
    <div id="app" class="flex-grow-1 d-flex flex-column">
        <!-- Header приложения (фиксирован к верху) -->
        <header class="fixed-top bg-primary bg-opacity-75 text-white py-3">
            <div class="container-fluid">
                <h1 class="h5 mb-0">Header</h1>
            </div>
        </header>

        <!-- Основной контент с отступами для header и footer (Bootstrap spacing utilities) -->
        <div class="container-fluid pt-5 pb-5 d-flex flex-column flex-grow-1">
            <main class="flex-grow-1 d-flex flex-column">
                <!-- Контент приложения загружается через Vue компоненты -->
                <div class="container flex-grow-1">
                    <!-- Тестовая секция для визуального контроля высоты -->
                    <div class="mb-4 p-3 bg-light border rounded">
                        <h3 class="h6 mb-3">Визуальный контроль высоты элементов</h3>
                        <div class="d-flex align-items-center" style="gap: 0;">
                            <!-- Поле ввода -->
                            <input type="text" class="form-control form-control-sm" placeholder="Поле" style="width: 100px; border-radius: 0.375rem 0 0 0.375rem; border-right: none;">
                            <!-- Кнопка -->
                            <cmp-button label="Кнопка" variant="primary" size="sm" :button-attributes="{ 'style': 'border-radius: 0; border-left: none; border-right: none;' }"></cmp-button>
                            <!-- Группа радиокнопок -->
                            <cmp-button-group
                                size="sm"
                                :buttons="[
                                    { type: 'radio', label: 'Опция 1', variant: 'outline-primary' },
                                    { type: 'radio', label: 'Опция 2', variant: 'outline-primary' }
                                ]">
                            </cmp-button-group>
                            <!-- Dropdown -->
                            <cmp-dropdown button-text="Меню" button-variant="primary" button-size="sm">
                                <template #items>
                                    <li><dropdown-menu-item title="Пункт 1" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 2" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 3" @click="handleClick"></dropdown-menu-item></li>
                                </template>
                            </cmp-dropdown>
                        </div>
                        <style>
                            /* Убираем border-radius и промежуточные границы для элементов встык */
                            .d-flex.align-items-center > input + cmp-button button,
                            .d-flex.align-items-center > cmp-button + cmp-button-group .btn-group > .btn:first-child {
                                border-radius: 0 !important;
                                border-left: none !important;
                            }
                            .d-flex.align-items-center > cmp-button-group + cmp-dropdown .dropdown-responsive button {
                                border-radius: 0 !important;
                                border-left: none !important;
                            }
                            .d-flex.align-items-center > cmp-dropdown:last-child .dropdown-responsive button {
                                border-radius: 0 0.375rem 0.375rem 0 !important;
                            }
                        </style>
                    </div>

                    <h2 class="mb-4">Примеры компонента combobox</h2>

                    <!-- Базовый комбобокс -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Базовый комбобокс</h3>
                        <div style="max-width: 400px;">
                            <cmp-combobox
                                v-model="comboboxValue1"
                                :items="comboboxItems"
                                placeholder="Выберите или введите..."
                                @select="handleComboboxSelect">
                            </cmp-combobox>
                            <p class="mt-2 text-muted small">Выбрано: {{ comboboxValue1 || '(пусто)' }}</p>
                        </div>
                    </div>

                    <!-- Комбобокс с иконкой -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">С иконкой</h3>
                        <div style="max-width: 400px;">
                            <cmp-combobox
                                v-model="comboboxValue2"
                                :items="comboboxItems"
                                icon="fas fa-search"
                                placeholder="Поиск..."
                                @select="handleComboboxSelect">
                            </cmp-combobox>
                            <p class="mt-2 text-muted small">Выбрано: {{ comboboxValue2 || '(пусто)' }}</p>
                        </div>
                    </div>

                    <!-- Комбобокс с автодополнением и подсветкой -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">С автодополнением и подсветкой</h3>
                        <div style="max-width: 400px;">
                            <cmp-combobox
                                v-model="comboboxValue3"
                                :items="comboboxItems"
                                :highlight-matches="true"
                                placeholder="Начните вводить..."
                                @select="handleComboboxSelect">
                            </cmp-combobox>
                            <p class="mt-2 text-muted small">Выбрано: {{ comboboxValue3 || '(пусто)' }}</p>
                        </div>
                    </div>

                    <!-- Комбобокс с прокруткой -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">С прокруткой (длинный список)</h3>
                        <div style="max-width: 400px;">
                            <cmp-combobox
                                v-model="comboboxValue4"
                                :items="comboboxLongList"
                                :scrollable="true"
                                max-height="200px"
                                placeholder="Выберите из списка..."
                                @select="handleComboboxSelect">
                            </cmp-combobox>
                            <p class="mt-2 text-muted small">Выбрано: {{ comboboxValue4 || '(пусто)' }}</p>
                        </div>
                    </div>

                    <!-- Комбобокс только из списка (strict) -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Только из списка (strict, без произвольного ввода)</h3>
                        <div style="max-width: 400px;">
                            <cmp-combobox
                                v-model="comboboxValue5"
                                :items="comboboxItems"
                                :strict="true"
                                :allow-custom="false"
                                placeholder="Только из списка..."
                                @select="handleComboboxSelect">
                            </cmp-combobox>
                            <p class="mt-2 text-muted small">Выбрано: {{ comboboxValue5 || '(пусто)' }}</p>
                        </div>
                    </div>

                    <!-- Комбобокс в режиме простого input -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Режим простого текстового поля (mode="input")</h3>
                        <div style="max-width: 400px;">
                            <cmp-combobox
                                v-model="comboboxValue6"
                                mode="input"
                                placeholder="Простое текстовое поле..."
                                @input="handleComboboxInput">
                            </cmp-combobox>
                            <p class="mt-2 text-muted small">Значение: {{ comboboxValue6 || '(пусто)' }}</p>
                        </div>
                    </div>

                    <!-- Комбобокс с кастомной фильтрацией -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">С кастомной функцией фильтрации</h3>
                        <div style="max-width: 400px;">
                            <cmp-combobox
                                v-model="comboboxValue7"
                                :items="comboboxItems"
                                :filter-function="customFilterFunction"
                                placeholder="Поиск по описанию..."
                                @select="handleComboboxSelect">
                            </cmp-combobox>
                            <p class="mt-2 text-muted small">Выбрано: {{ comboboxValue7 || '(пусто)' }}</p>
                        </div>
                    </div>

                    <!-- Комбобокс с длинным списком -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">С длинным списком (без прокрутки)</h3>
                        <div class="input-group mb-3" style="max-width: 400px;">
                            <input type="text" class="form-control" placeholder="Выберите элемент..." aria-label="Комбобокс">
                            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#">Элемент 1</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 2</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 3</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 4</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 5</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 6</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 7</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 8</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 9</a></li>
                                <li><a class="dropdown-item" href="#">Элемент 10</a></li>
                            </ul>
                        </div>
                    </div>

                    <hr class="my-5">

                    <h2 class="mb-4">Примеры компонента button</h2>

                    <!-- Базовые варианты -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Базовые варианты</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button label="Primary" variant="primary" @click="handleClick"></cmp-button>
                            <cmp-button label="Secondary" variant="secondary" @click="handleClick"></cmp-button>
                            <cmp-button label="Success" variant="success" @click="handleClick"></cmp-button>
                            <cmp-button label="Danger" variant="danger" @click="handleClick"></cmp-button>
                            <cmp-button label="Warning" variant="warning" @click="handleClick"></cmp-button>
                            <cmp-button label="Info" variant="info" @click="handleClick"></cmp-button>
                            <cmp-button label="Light" variant="light" @click="handleClick"></cmp-button>
                            <cmp-button label="Dark" variant="dark" @click="handleClick"></cmp-button>
                        </div>
                    </div>

                    <!-- Outline варианты -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Outline варианты</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button label="Primary" variant="outline-primary" @click="handleClick"></cmp-button>
                            <cmp-button label="Secondary" variant="outline-secondary" @click="handleClick"></cmp-button>
                            <cmp-button label="Success" variant="outline-success" @click="handleClick"></cmp-button>
                            <cmp-button label="Danger" variant="outline-danger" @click="handleClick"></cmp-button>
                        </div>
                    </div>

                    <!-- Размеры -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Размеры</h3>
                        <div class="d-flex flex-wrap align-items-center gap-2 mb-3">
                            <cmp-button label="Small" size="sm" @click="handleClick"></cmp-button>
                            <cmp-button label="Default" @click="handleClick"></cmp-button>
                            <cmp-button label="Large" size="lg" @click="handleClick"></cmp-button>
                        </div>
                    </div>

                    <!-- С иконками -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">С иконками</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button
                                label="Сохранить"
                                icon="fas fa-save"
                                tooltip-icon="Иконка: Сохранить"
                                tooltip-text="Основной текст: Сохранить изменения"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                label="Удалить"
                                icon="fas fa-trash"
                                variant="danger"
                                tooltip-icon="Иконка: Удалить"
                                tooltip-text="Основной текст: Удалить элемент"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                label="Загрузить"
                                icon="fas fa-download"
                                variant="success"
                                tooltip-icon="Иконка: Загрузить"
                                tooltip-text="Основной текст: Загрузить файл"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                icon="fas fa-cog"
                                variant="secondary"
                                tooltip-icon="Иконка: Настройки"
                                tooltip-text="Основной текст: Открыть настройки"
                                @click="handleClick">
                            </cmp-button>
                            <!-- С укороченным текстом на мобильных (без иконки) -->
                            <cmp-button
                                label="Сохранить изменения"
                                label-short="Сохранить"
                                tooltip-text="Основной текст: Сохранить все изменения"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                label="Открыть настройки"
                                label-short="Настройки"
                                variant="secondary"
                                tooltip-text="Основной текст: Открыть настройки приложения"
                                @click="handleClick">
                            </cmp-button>
                        </div>
                    </div>

                    <!-- С суффиксами -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">С суффиксами</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button
                                label="Уведомления"
                                icon="fas fa-bell"
                                tooltip-icon="Иконка: Уведомления"
                                tooltip-text="Основной текст: Просмотр уведомлений"
                                :suffix="{ type: 'badge', value: 5, variant: 'secondary', tooltip: 'Суффикс: 5 новых уведомлений' }"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                label="Экспорт"
                                icon="fas fa-download"
                                tooltip-icon="Иконка: Экспорт"
                                tooltip-text="Основной текст: Экспорт данных"
                                :suffix="{ type: 'icon', value: 'fas fa-external-link-alt', tooltip: 'Суффикс: Открыть в новой вкладке' }"
                                @click="handleClick"
                                @click-suffix="handleSuffixClick">
                            </cmp-button>
                            <cmp-button
                                label="Соединение"
                                icon="fas fa-wifi"
                                tooltip-icon="Иконка: Соединение"
                                tooltip-text="Основной текст: Статус подключения"
                                :suffix="{ type: 'indicator', value: 'fas fa-circle text-success', tooltip: 'Суффикс: Статус: Активен' }"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                label="Меню"
                                tooltip-text="Основной текст: Раскрыть меню"
                                :suffix="{ type: 'chevron', value: 'fas fa-chevron-down', expanded: isMenuExpanded, tooltip: 'Суффикс: Раскрыть/свернуть меню' }"
                                @click="toggleMenu">
                            </cmp-button>
                            <cmp-button
                                label="Справка"
                                icon="fas fa-question-circle"
                                tooltip-icon="Иконка: Справка"
                                tooltip-text="Основной текст: Открыть справку"
                                :suffix="{ type: 'info', value: 'fas fa-info-circle text-info', tooltip: 'Суффикс: Открыть справку' }"
                                @click="handleClick"
                                @click-suffix="handleInfoClick">
                            </cmp-button>
                        </div>
                    </div>

                    <!-- Множественные badge -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Множественные badge</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button
                                label="Уведомления"
                                icon="fas fa-bell"
                                tooltip-icon="Иконка: Уведомления"
                                tooltip-text="Основной текст: Просмотр уведомлений"
                                :suffix="[
                                    { type: 'badge', value: 5, variant: 'secondary', tooltip: 'Суффикс 1: 5 новых уведомлений' },
                                    { type: 'badge', value: 'New', variant: 'primary', tooltip: 'Суффикс 2: Новая функция' }
                                ]"
                                @click="handleClick">
                            </cmp-button>
                        </div>
                    </div>

                    <!-- Состояния -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Состояния</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button label="Active" @click="handleClick"></cmp-button>
                            <cmp-button label="Disabled" :disabled="true" @click="handleClick"></cmp-button>
                            <cmp-button label="Loading" :loading="true" @click="handleClick"></cmp-button>
                            <cmp-button label="Disabled + Loading" :disabled="true" :loading="true" @click="handleClick"></cmp-button>
                        </div>
                    </div>

                    <!-- Типы кнопок -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Типы кнопок</h3>
                        <p class="text-muted small mb-2">На экранах &lt; 576px надписи замещаются иконками</p>
                        <form class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button
                                label="Button"
                                icon="fas fa-hand-pointer"
                                type="button"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                label="Submit"
                                icon="fas fa-check"
                                type="submit"
                                variant="success"
                                @click="handleClick">
                            </cmp-button>
                            <cmp-button
                                label="Reset"
                                icon="fas fa-undo"
                                type="reset"
                                variant="warning"
                                @click="handleClick">
                            </cmp-button>
                        </form>
                    </div>


                    <!-- Адаптивность (мобильные состояния) -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Адаптивность (мобильные состояния)</h3>
                        <p class="text-muted small mb-2">На мобильных устройствах текст скрывается, если есть иконка (измените размер окна для проверки)</p>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button label="Сохранить" icon="fas fa-save" @click="handleClick"></cmp-button>
                            <cmp-button label="Удалить" icon="fas fa-trash" variant="danger" @click="handleClick"></cmp-button>
                            <cmp-button label="Настройки" icon="fas fa-cog" variant="secondary" @click="handleClick"></cmp-button>
                            <cmp-button
                                label="Уведомления"
                                icon="fas fa-bell"
                                :suffix="{ type: 'badge', value: 5, variant: 'secondary' }"
                                @click="handleClick">
                            </cmp-button>
                        </div>
                        <p class="text-muted small mb-2">Текст всегда виден, если нет иконки:</p>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button label="Только текст" @click="handleClick"></cmp-button>
                            <cmp-button
                                label="Текст с badge"
                                :suffix="{ type: 'badge', value: 'New', variant: 'primary' }"
                                @click="handleClick">
                            </cmp-button>
                        </div>
                        <p class="text-muted small mb-2">Адаптивность управляется через CSS классы (измените размер окна для проверки):</p>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button
                                label="Сохранить"
                                icon="fas fa-save"
                                tooltip-icon="Иконка: Сохранить"
                                tooltip-text="Основной текст: Сохранить изменения"
                                @click="handleClick">
                            </cmp-button>
                        </div>
                        <p class="text-muted small mb-2">С укороченным текстом на мобильных:</p>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-button
                                label="Сохранить изменения"
                                label-short="Сохранить"
                                @click="handleClick">
                            </cmp-button>
                        </div>
                    </div>

                    <hr class="my-5">

                    <h2 class="mb-4">Примеры компонента dropdown</h2>

                    <!-- Базовый dropdown -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Базовый dropdown</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-dropdown button-text="Выбрать пункт">
                                <template #items>
                                    <li><dropdown-menu-item title="Пункт 1" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 2" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 3" @click="handleClick"></dropdown-menu-item></li>
                                </template>
                            </cmp-dropdown>
                            <!-- С иконкой на мобильных -->
                            <cmp-dropdown
                                button-text="Выбрать пункт"
                                button-icon="fas fa-chevron-down">
                                <template #items>
                                    <li><dropdown-menu-item title="Пункт 1" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 2" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 3" @click="handleClick"></dropdown-menu-item></li>
                                </template>
                            </cmp-dropdown>
                            <!-- С укороченным текстом на мобильных -->
                            <cmp-dropdown
                                button-text="Выбрать пункт"
                                button-text-short="Выбрать">
                                <template #items>
                                    <li><dropdown-menu-item title="Пункт 1" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 2" @click="handleClick"></dropdown-menu-item></li>
                                    <li><dropdown-menu-item title="Пункт 3" @click="handleClick"></dropdown-menu-item></li>
                                </template>
                            </cmp-dropdown>
                        </div>
                    </div>

                    <!-- Dropdown с поиском -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Dropdown с поиском</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-dropdown
                                button-text="Поиск элементов"
                                :searchable="true"
                                :items="dropdownItems">
                                <template #items="{ filteredItems }">
                                    <li v-for="item in filteredItems" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                            <!-- С иконкой на мобильных -->
                            <cmp-dropdown
                                button-text="Поиск элементов"
                                button-icon="fas fa-search"
                                :searchable="true"
                                :items="dropdownItems">
                                <template #items="{ filteredItems }">
                                    <li v-for="item in filteredItems" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                            <!-- С укороченным текстом на мобильных -->
                            <cmp-dropdown
                                button-text="Поиск элементов"
                                button-text-short="Поиск"
                                :searchable="true"
                                :items="dropdownItems">
                                <template #items="{ filteredItems }">
                                    <li v-for="item in filteredItems" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                        </div>
                    </div>

                    <!-- Dropdown с прокруткой -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Dropdown с прокруткой (длинный список)</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-dropdown
                                button-text="Длинный список"
                                :scrollable="true"
                                max-height="300px">
                                <template #items>
                                    <li v-for="item in longList" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                            <!-- С иконкой на мобильных -->
                            <cmp-dropdown
                                button-text="Длинный список"
                                button-icon="fas fa-list"
                                :scrollable="true"
                                max-height="300px">
                                <template #items>
                                    <li v-for="item in longList" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                            <!-- С укороченным текстом на мобильных -->
                            <cmp-dropdown
                                button-text="Длинный список"
                                button-text-short="Список"
                                :scrollable="true"
                                max-height="300px">
                                <template #items>
                                    <li v-for="item in longList" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                        </div>
                    </div>

                    <!-- Dropdown с поиском и прокруткой -->
                    <div class="mb-4">
                        <h3 class="h5 mb-3">Dropdown с поиском и прокруткой</h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <cmp-dropdown
                                button-text="Поиск в длинном списке"
                                :searchable="true"
                                :scrollable="true"
                                max-height="300px"
                                :items="longList">
                                <template #items="{ filteredItems }">
                                    <li v-for="item in filteredItems" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                            <!-- С иконкой на мобильных -->
                            <cmp-dropdown
                                button-text="Поиск в длинном списке"
                                button-icon="fas fa-search"
                                :searchable="true"
                                :scrollable="true"
                                max-height="300px"
                                :items="longList">
                                <template #items="{ filteredItems }">
                                    <li v-for="item in filteredItems" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                            <!-- С укороченным текстом на мобильных -->
                            <cmp-dropdown
                                button-text="Поиск в длинном списке"
                                button-text-short="Поиск"
                                :searchable="true"
                                :scrollable="true"
                                max-height="300px"
                                :items="longList">
                                <template #items="{ filteredItems }">
                                    <li v-for="item in filteredItems" :key="item.id">
                                        <dropdown-menu-item
                                            :title="item.name"
                                            :subtitle="item.description"
                                            @click="handleSelect(item)">
                                        </dropdown-menu-item>
                                    </li>
                                </template>
                            </cmp-dropdown>
                        </div>
                    </div>

                    <hr class="my-5">

                    <h2 class="mb-4">Примеры компонента dropdown-menu-item</h2>

                    <!-- Примеры компонента в разных состояниях -->
                    <ul class="dropdown-menu show position-static d-block border shadow-sm p-0 mb-4" style="max-width: 400px;">
                        <!-- Базовый пример -->
                        <dropdown-menu-item
                            title="Простой пункт меню"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- С иконкой и подзаголовком -->
                        <dropdown-menu-item
                            title="Аналитика рынков"
                            subtitle="Детальная статистика по всем торговым парам"
                            icon="fas fa-chart-line"
                            tooltip-icon="Иконка: Аналитика рынков"
                            tooltip-text="Основной текст: Просмотр статистики"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- С badge -->
                        <dropdown-menu-item
                            title="Уведомления"
                            subtitle="Новые сообщения и обновления"
                            icon="fas fa-bell"
                            :suffix="{ type: 'badge', value: 5, variant: 'secondary', tooltip: 'Количество уведомлений' }"
                            tooltip-icon="Иконка: Уведомления"
                            tooltip-text="Основной текст: Просмотр уведомлений"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- Active состояние -->
                        <dropdown-menu-item
                            title="Настройки"
                            subtitle="Конфигурация системы"
                            icon="fas fa-cog"
                            :active="true"
                            tooltip-icon="Иконка: Настройки системы"
                            tooltip-text="Основной текст: Конфигурация системы"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- С иконкой-суффиксом -->
                        <dropdown-menu-item
                            title="Экспорт данных"
                            subtitle="Сохранение в файл"
                            icon="fas fa-download"
                            :suffix="{ type: 'icon', value: 'fas fa-external-link-alt', tooltip: 'Открыть в новой вкладке' }"
                            tooltip-icon="Иконка: Экспорт"
                            tooltip-text="Основной текст: Экспорт данных"
                            @click="handleClick"
                            @click-suffix="handleSuffixClick">
                        </dropdown-menu-item>

                        <!-- С индикатором -->
                        <dropdown-menu-item
                            title="Соединение"
                            subtitle="Статус подключения"
                            icon="fas fa-wifi"
                            :suffix="{ type: 'indicator', value: 'fas fa-circle text-success', tooltip: 'Статус: Активен' }"
                            tooltip-icon="Иконка: Соединение"
                            tooltip-text="Основной текст: Статус подключения"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- С chevron (закрыт) -->
                        <dropdown-menu-item
                            title="Настройки"
                            subtitle="Конфигурация системы"
                            icon="fas fa-cog"
                            :suffix="{ type: 'chevron', value: 'fas fa-chevron-right', expanded: false, tooltip: 'Раскрыть подменю' }"
                            tooltip-icon="Иконка: Настройки"
                            tooltip-text="Основной текст: Настройки"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- С chevron (открыт) -->
                        <dropdown-menu-item
                            title="Настройки"
                            subtitle="Конфигурация системы"
                            icon="fas fa-cog"
                            :suffix="{ type: 'chevron', value: 'fas fa-chevron-right', expanded: true, tooltip: 'Свернуть подменю' }"
                            tooltip-icon="Иконка: Настройки"
                            tooltip-text="Основной текст: Настройки"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- С info (справка) -->
                        <dropdown-menu-item
                            title="Расширенная аналитика"
                            subtitle="Премиум функции"
                            icon="fas fa-chart-bar"
                            :suffix="{ type: 'info', value: 'fas fa-info-circle text-info', tooltip: 'Открыть справку' }"
                            tooltip-icon="Иконка: Аналитика"
                            tooltip-text="Основной текст: Расширенная аналитика"
                            @click="handleClick"
                            @click-suffix="handleInfoClick">
                        </dropdown-menu-item>

                        <!-- Disabled состояние -->
                        <dropdown-menu-item
                            title="Заблокировано"
                            subtitle="Функция недоступна"
                            icon="fas fa-lock"
                            :disabled="true"
                            tooltip-icon="Иконка: Заблокировано"
                            tooltip-text="Основной текст: Функция недоступна"
                            @click="handleClick">
                        </dropdown-menu-item>

                        <!-- Длинный текст с переносом -->
                        <dropdown-menu-item
                            title="Очень длинный заголовок пункта меню который должен переноситься на несколько строк"
                            subtitle="И очень длинный подзаголовок который тоже должен переноситься на несколько строк для проверки работы text-wrap"
                            icon="fas fa-file-alt"
                            :suffix="{ type: 'badge', value: 'New', variant: 'primary', tooltip: 'Новая функция' }"
                            tooltip-icon="Иконка: Документ"
                            tooltip-text="Основной текст: Длинный текст"
                            @click="handleClick">
                        </dropdown-menu-item>
                    </ul>
                </div>
            </main>
        </div>

        <!-- Footer приложения (фиксирован к низу) -->
        <footer class="fixed-bottom bg-success bg-opacity-75 text-white py-3">
            <div class="container-fluid">
                <p class="mb-0">Footer</p>
            </div>
        </footer>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

    <!-- Модульная система загрузки скриптов -->
    <!-- Конфигурация модулей (описывает все модули и их зависимости) -->
    <script src="core/modules-config.js"></script>
    <!-- Загрузчик модулей (автоматически загружает модули в правильном порядке) -->
    <script src="core/module-loader.js"></script>
    <!-- Загрузка всех модулей через модульную систему -->
    <script>
        (function() {
            'use strict';
            // Загружаем все модули после загрузки DOM
            function initModules() {
                if (!window.moduleLoader || !window.moduleLoader.hasConfig()) {
                    console.error('module-loader: загрузчик модулей или конфигурация не найдены');
                    return;
                }

                window.moduleLoader.load()
                    .then(function() {
                        console.log('module-loader: все модули загружены, приложение готово');
                    })
                    .catch(function(error) {
                        console.error('module-loader: ошибка загрузки модулей:', error);
                    });
            }

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initModules);
            } else {
                initModules();
            }
        })();
    </script>

    <!-- Стили для компонентов -->
    <style>
/* Крестик для очистки через CSS псевдоэлемент (для combobox) */
.combobox-clear {
    cursor: pointer;
    position: relative;
    padding: 0.375rem 0.5rem;
}

.combobox-clear::before {
    content: '\f00d'; /* Font Awesome times icon */
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    font-size: 0.875rem;
    color: var(--bs-secondary);
    transition: color 0.15s ease-in-out;
}

.combobox-clear:hover::before {
    color: var(--bs-danger);
}

.combobox-clear:active::before {
    color: var(--bs-danger);
    opacity: 0.75;
}
    </style>
</body>
</html>
